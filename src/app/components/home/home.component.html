<div class="home-container">
  <div class="summary-row">
    <mat-card class="summary-card year">
      <mat-card-title class="summary-title">{{year}} Spending</mat-card-title>
      <mat-card-content>₹{{ yearlyExpenditure | number:'1.2-2' }}</mat-card-content>
    </mat-card>

    <mat-card class="summary-card month">
      <mat-card-title class="summary-title">{{year}} {{monthName}} Spending</mat-card-title>
      <mat-card-content>₹{{ monthlyExpenditure | number:'1.2-2' }}</mat-card-content>
    </mat-card>
  </div>

  <div class="transaction-list" *ngIf="!showTentativeTransaction">
    <mat-card *ngFor="let t of transactions" class="transaction-card">

      <div class="transaction-content">
        <div class="left-icon">
          <mat-icon>{{ getTransactionCategoryIcon(t) }}</mat-icon>
        </div>

        <div class="right-details">
          <div class="transaction-header">
            <span class="amount" [ngClass]="{ credit: t.amount > 0, debit: t.amount < 0 }">
              ₹{{ t.amount | number:'1.2-2' }}
            </span>
            <span class="date">{{ t.date | date: 'MMM dd' }}</span>
          </div>

          <div class="description">{{ t.description }}</div>
        </div>

        <div class="right-icon">
          <div class="source-icon" *ngIf="t.source === 'phoneMessage'" (click)="showSmsSourceDetails(t)">
            <mat-icon>message</mat-icon>
          </div>
          <div class="more-icon" (click)="toggleDrawer(t, $event)">
            <mat-icon>more_vert</mat-icon>
          </div>
        </div>

      </div>

      <!-- Drawer Overlay -->
      <div class="drawer-overlay" *ngIf="t.showDrawer" (click)="closeAllDrawers()">
        <div class="action-drawer" (click)="$event.stopPropagation()" [@drawerAnimation]>
          <button mat-icon-button class="action-btn edit" (click)="editTransaction(t)">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button class="action-btn delete" (click)="deleteTransaction(t)">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>

    </mat-card>

  </div>

  <div class="transaction-list" *ngIf="showTentativeTransaction">
    <app-tentative-transactions [hideTitile]="true"></app-tentative-transactions>
  </div>
</div>